<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Cart - Chennai Tourist Places</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-[#f4fffd]">

<header class="pt-10">
  <div class="max-w-5xl mx-auto px-4">
    <!-- Enhanced styling for "Your Cart" / Travel Itinerary -->
    <h2 class="text-5xl font-extrabold text-center tracking-tight mb-4 bg-clip-text text-transparent bg-gradient-to-r from-teal-600 to-cyan-500">
        Your Travel Itinerary
    </h2>
    <p class="text-xl text-center text-gray-600 mb-8">
      Review your selected tourist places.
    </p>
    <div class="flex justify-start mb-8">
      <!-- Updated back button text and style -->
      <button onclick="window.location.href='index.html'" class="bg-white text-gray-700 px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 font-semibold shadow transition-colors flex items-center gap-1">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
        Back to Places List
      </button>
    </div>
  </div>
</header>

<main class="max-w-5xl mx-auto px-4 pb-12">
  <div id="cartItems" class="space-y-4">
    <!-- Cart items will be rendered here -->
  </div>
  <div id="emptyCartMessage" class="hidden text-center mt-12">
    <p class="text-2xl text-gray-600 font-semibold">Your cart is empty. Start adding places!</p>
  </div>
  <div id="cartSummary" class="mt-8 pt-4 border-t border-gray-200 flex justify-between items-center hidden">
    <p class="text-2xl font-bold text-gray-900">Total Places: <span id="totalItems">0</span></p>
    
    <!-- New buttons added here -->
    <div class="flex flex-wrap justify-end gap-3">
      <button onclick="alert('Generating optimized map...')" class="bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 font-bold shadow-lg transition-colors flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
        Generate Map
      </button>
      <button onclick="alert('Viewing suggested schedule...')" class="bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 font-bold shadow-lg transition-colors flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
        View Schedule
      </button>
      <button onclick="clearCart()" class="bg-red-600 text-white px-6 py-3 rounded-xl hover:bg-red-700 font-bold shadow-lg transition-colors">
        Clear Itinerary
      </button>
    </div>
  </div>
</main>

<script>
  // IMPORTANT: Do not use alert() or confirm() in production code. Use a custom modal UI instead.
  function alert(message) {
    console.log("Alert (simulated): " + message);
    const existingNotification = document.getElementById('notification-box');
    if (existingNotification) existingNotification.remove();

    const notification = document.createElement('div');
    notification.id = 'notification-box';
    notification.className = 'fixed top-4 right-4 bg-teal-600 text-white p-4 rounded-lg shadow-xl z-50 transition-transform transform duration-300';
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.classList.add('translate-x-full');
      notification.addEventListener('transitionend', () => notification.remove());
    }, 2000);
  }
  
  function confirm(message) {
    return window.confirm(message); // Fallback for simple demo, though custom UI is preferred
  }


  function renderCart() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const cartItemsContainer = document.getElementById('cartItems');
    const emptyMessage = document.getElementById('emptyCartMessage');
    const cartSummary = document.getElementById('cartSummary');
    const totalItemsSpan = document.getElementById('totalItems');

    cartItemsContainer.innerHTML = ''; // Clear previous content

    if (cart.length === 0) {
      emptyMessage.classList.remove('hidden');
      cartSummary.classList.add('hidden');
      return;
    }

    emptyMessage.classList.add('hidden');
    cartSummary.classList.remove('hidden');
    totalItemsSpan.textContent = cart.length;

    cart.forEach(item => {
      const itemElement = document.createElement('div');
      // p-4 provides the vertical spacing, which keeps the height low
      itemElement.className = 'flex items-center bg-white p-4 rounded-xl shadow-md border border-gray-100';
      
      // Determine if it has a banner image or a generic icon
      const isImage = item.icon && (item.icon.endsWith('.jpg') || item.icon.endsWith('.png') || item.icon.endsWith('.jpeg'));

      // Image/Icon size reduced to w-10 h-10 (40x40px)
      const imageOrIconHTML = isImage ? 
        `<img src="${item.icon}" alt="${item.name}" class="w-10 h-10 object-cover rounded-lg mr-4 border" />` :
        `<span class="text-2xl w-10 h-10 flex items-center justify-center mr-4 bg-gray-100 rounded-lg">${item.icon || '📍'}</span>`;


      itemElement.innerHTML = `
        ${imageOrIconHTML}
        <div class="flex-grow">
          <!-- Stacked layout: Name on top, Category below -->
          <h3 class="text-base font-bold text-gray-900">${item.name}</h3>
          <!-- Category text aligned below name -->
          <span class="text-xs font-semibold px-2 py-0.5 rounded-full bg-teal-100 text-teal-700 inline-block mt-0.5">${item.category}</span>
        </div>
        <button onclick="removeFromCart('${item.name.replace(/'/g, "\\'")}')" class="bg-red-100 text-red-700 px-3 py-1 rounded-lg text-sm font-semibold hover:bg-red-200 ml-4 transition-colors">
          Remove
        </button>
      `;
      cartItemsContainer.appendChild(itemElement);
    });
  }

  function removeFromCart(nameToRemove) {
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    cart = cart.filter(item => item.name !== nameToRemove);
    localStorage.setItem('cart', JSON.stringify(cart));
    renderCart(); // Re-render the cart after removal
    alert(nameToRemove + " removed from itinerary.");
  }

  function clearCart() {
    if (confirm("Are you sure you want to clear your entire itinerary?")) {
      localStorage.removeItem('cart');
      renderCart();
      alert("Itinerary cleared!");
    }
  }

  window.onload = renderCart;
</script>
</body>
</html>
