<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Place Description</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50">

<header class="bg-white/90 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-10">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16 relative">
            
                        <button onclick="window.history.back()" class="text-gray-600 hover:text-gray-900 bg-transparent px-3 py-1 rounded-md text-sm transition-colors duration-200 flex items-center space-x-1 z-10">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                <span>Back</span>
            </button>
            
                        <div class="absolute inset-x-0 flex justify-center items-center h-full">
                <h1 class="text-xl font-bold text-gray-900 text-center truncate" id="placeTitle">Place</h1>
            </div>
            
                        <button onclick="viewCart()" class="text-white bg-teal-600 hover:bg-teal-700 px-3 py-1 rounded-md text-sm font-semibold transition-colors duration-200 shadow-md z-10">
                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                view places
            </button>
        </div>
    </div>
</header>

<main class="max-w-4xl mx-auto px-4 py-8">
    <div id="descriptionArea" class="text-gray-900 space-y-4 text-lg font-sans"></div>
    <button id="showMapBtn" class="mt-8 bg-teal-600 text-white px-5 py-2 rounded-md text-sm font-semibold hover:bg-teal-700 transition-colors">Show Map</button>
    <button id="addCartBtn" class="mt-4 bg-orange-600 text-white px-5 py-2 rounded-md text-sm font-semibold hover:bg-orange-700 transition-colors">Add place</button>
</main>

<script>
// NOTE: touristData is defined here to support the helper functions below (getCategory/getDistrict/getIcon)
const touristData = {
    "Tamil Nadu": {
        "Chennai": {
            icon: "🏛️",
            places: {
                "Beaches": [
                    { name: "Marina Beach", description: "Longest urban beach in India.", icon: "🌅" }
                ],
                "Historical Sites": [
                    { name: "Fort St. George", description: "Historic fort and museum.", icon: "🏰" }
                ],
                "Temples": [
                    { name: "Kapaleeshwarar Temple", description: "Iconic Dravidian architecture.", icon: "🛕" }
                ],
                "Churches": [
                    { name: "San Thome Basilica", description: "Roman Catholic Basilica built over St. Thomas' tomb.", icon: "⛪" }
                ],
                "Parks": [
                    { name: "Guindy National Park", description: "Urban wildlife park.", icon: "🦌" }
                ]
            }
        }
    }
};

const placeDescriptions = {
    "Marina Beach": ` <img src="https://hblimg.mmtcdn.com/content/hubble/img/Chennai/mmt/activities/m_activities_chennai_marina_beach_l_505_757.jpg" alt="Marina Beach" class="rounded-xl mb-4 w-full object-cover max-h-64"> <p>Description: Marina Beach is Chennai’s most famous landmark and the longest urban beach in India, stretching over 13 km along the Bay of Bengal. Visitors can enjoy serene sunrise and sunset views, long walks along the shoreline, and fun local activities like horse riding and kite flying. The beach is also home to several statues of Tamil leaders and national icons, making it both a cultural and recreational hub. Street food stalls serve local snacks, creating a lively atmosphere.</p>  <p><b>Best For:</b> Sunrise/Sunset views, photography, local food, evening strolls</p>  <p><b>Entry Fee:</b> Free</p> <div class="mt-6 aspect-w-16 aspect-h-9"> <iframe src="https://www.youtube.com/embed/708H5J6MLIY" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="rounded-lg w-full h-64"></iframe> </div>`,
    "Fort St. George": `<img src="https://i0.wp.com/www.tusktravel.com/blog/wp-content/uploads/2023/07/Secretariat-inside-Fort-St-George-Chennai.jpg" alt="Fort St. George" class="rounded-xl mb-4 w-full object-cover max-h-64"> <p>Description: Fort St. George, built in 1644, is the first British fortress in India and marks the origin of modern Chennai. The fort complex houses the St. Mary’s Church—the oldest Anglican church in India—and a museum showcasing colonial relics, weapons, coins, maps, and uniforms. Visitors can explore the historic architecture, fortified walls, and learn about Chennai’s colonial past.</p> <p><b>Best For:</b> History enthusiasts, architecture lovers, educational visits</p> <p><b>Entry Fee:</b> Around ₹50 (museum)</p>`,
    "Kapaleeshwarar Temple": `<img src="https://www.mrpilot.in/blog/wp-content/uploads/2020/01/Kapaleeshwarar-Temple-Chennai.jpg" alt="Kapaleeshwarar Temple" class="rounded-xl mb-4 w-full object-cover max-h-64"> <p>Description: Located in Mylapore, Kapaleeshwarar Temple is a stunning Dravidian-style temple dedicated to Lord Shiva. Famous for its towering gopuram adorned with colorful sculptures, the temple is a vibrant cultural hub. The temple hosts festivals like the Arubathimoovar Festival, featuring grand processions. Devotees also visit the sacred tank for ritualistic dips.</p> <p><b>Best For:</b> Spiritual experiences, photography, cultural exploration</p> <p><b>Entry Fee:</b> Free</p>`,
    "San Thome Basilica": `<img src="https://thumbnails.yayimages.com/1600/0/7a6/7a651d.jpg" alt="San Thome Basilica" class="rounded-xl mb-4 w-full object-cover max-h-64"> <p>Description: San Thome Basilica is a beautiful Neo-Gothic Roman Catholic church built over the tomb of St. Thomas the Apostle. It is one of the three churches in the world constructed over an apostle’s tomb. Visitors can admire the tall spires, stained glass windows, and peaceful interiors. The Basilica also has a museum showcasing Christian relics and historical artifacts.</p> <p><b>Best For:</b> Religious tourism, history, architecture</p> <p><b>Entry Fee:</b> Free</p>`,
    "Guindy National Park": `<img src="https://eindiatourism.in/wp-content/uploads/2023/07/Guindy_national_park.jpg" alt="Guindy National Park" class="rounded-xl mb-4 w-full object-cover max-h-64"> <p>Description: Guindy National Park is a protected area in the heart of Chennai, making it one of the few urban national parks in the world. It spans 2.71 sq km and is located near Raj Bhavan and IIT Madras. The park is home to spotted deer, blackbucks, snakes, and a variety of birds, making it perfect for wildlife enthusiasts. Nature trails allow visitors to enjoy a peaceful walk while observing native flora and fauna. The on-site Snake Park offers an educational experience for children and adults alike.</p> <p><b>Best For:</b> Nature lovers, wildlife photography, family outings</p> <p><b>Entry Fee:</b> Around ₹15-20</p>`
};

const mapPages = {
    "Marina Beach": "marina-beach-map.html",
    "Fort St. George": "fort-st-george-map.html",
    "Kapaleeshwarar Temple": "kapaleeshwarar-temple-map.html",
    "San Thome Basilica": "santhome-basilica-map.html",
    "Guindy National Park": "guindy-park-map.html"
};

function getPlaceFromUrl() {
    const params = new URLSearchParams(window.location.search);
    return params.get('place');
}

function initialize() {
    const place = getPlaceFromUrl();
    if (!place || !placeDescriptions[place]) {
        document.getElementById('descriptionArea').innerHTML = "<p>Place description not found.</p>";
        document.getElementById('showMapBtn').style.display = "none";
        document.getElementById('addCartBtn').style.display = "none";
        document.getElementById('placeTitle').textContent = "Unknown Place";
        return;
    }
    document.getElementById('placeTitle').textContent = place;
    document.getElementById('descriptionArea').innerHTML = placeDescriptions[place];
    
    // Show Add to Cart button and attach handler
    const addCartBtn = document.getElementById('addCartBtn');
    addCartBtn.style.display = 'inline-block';
    addCartBtn.onclick = () => addToCart(
        place,
        getCategoryFromPlace(place),
        getDistrictFromPlace(place),
        getDescriptionText(place),
        getIconFromPlace(place)
    );

    document.getElementById('showMapBtn').addEventListener('click', () => {
        const mapPage = mapPages[place];
        if (mapPage) {
            window.location.href = mapPage;
        } else {
            alert("Map page not found for this place.");
        }
    });
}

function getCategoryFromPlace(place) {
    for (const district in touristData["Tamil Nadu"]) {
        for (const cat in touristData["Tamil Nadu"][district].places) {
            if (touristData["Tamil Nadu"][district].places[cat].some(p => p.name === place)) return cat;
        }
    }
    return "Unknown";
}

function getDistrictFromPlace(place) {
    for (const district in touristData["Tamil Nadu"]) {
        for (const cat in touristData["Tamil Nadu"][district].places) {
            if (touristData["Tamil Nadu"][district].places[cat].some(p => p.name === place)) return district;
        }
    }
    return "Unknown";
}

function getDescriptionText(place) {
    if (placeDescriptions[place]) {
        // Simple parse text without html tags or complex process
        return placeDescriptions[place].replace(/(<([^>]+)>)/gi, "");
    }
    return "";
}

function getIconFromPlace(place) {
    for (const district in touristData["Tamil Nadu"]) {
        for (const cat in touristData["Tamil Nadu"][district].places) {
            const p = touristData["Tamil Nadu"][district].places[cat].find(pi => pi.name === place);
            if (p) return p.icon || "";
        }
    }
    return "";
}

function viewCart() {
    // Links to the cart page
    window.location.href = 'cart.html'; 
}

window.onload = initialize;

function addToCart(name, category, district, description, icon) {
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const exists = cart.some(item => item.name === name && item.district === district);
    if (exists) {
        alert(name + " is already in the cart.");
        return;
    }
    cart.push({ name, category, district, description, icon });
    localStorage.setItem('cart', JSON.stringify(cart));
    alert(name + " added to cart!");
}
</script>
</body>
</html>